{"ast":null,"code":"'use strict';\n\nconst symbols = require('../schema/symbols');\n\n/*!\n * ignore\n */\n\nmodule.exports = function validateBeforeSave(schema) {\n  const unshift = true;\n  schema.pre('save', false, validateBeforeSavePreSave, null, unshift);\n};\nasync function validateBeforeSavePreSave(options) {\n  // Nested docs have their own presave\n  if (this.$isSubdocument) {\n    return;\n  }\n  const hasValidateBeforeSaveOption = options && typeof options === 'object' && 'validateBeforeSave' in options;\n  let shouldValidate;\n  if (hasValidateBeforeSaveOption) {\n    shouldValidate = !!options.validateBeforeSave;\n  } else {\n    shouldValidate = this.$__schema.options.validateBeforeSave;\n  }\n\n  // Validate\n  if (shouldValidate) {\n    const hasValidateModifiedOnlyOption = options && typeof options === 'object' && 'validateModifiedOnly' in options;\n    const validateOptions = hasValidateModifiedOnlyOption ? {\n      validateModifiedOnly: options.validateModifiedOnly\n    } : null;\n    await this.$validate(validateOptions).then(() => {\n      this.$op = 'save';\n    });\n  }\n}\nvalidateBeforeSavePreSave[symbols.builtInMiddleware] = true;","map":{"version":3,"names":["symbols","require","module","exports","validateBeforeSave","schema","unshift","pre","validateBeforeSavePreSave","options","$isSubdocument","hasValidateBeforeSaveOption","shouldValidate","$__schema","hasValidateModifiedOnlyOption","validateOptions","validateModifiedOnly","$validate","then","$op","builtInMiddleware"],"sources":["C:/Users/bhavn/OneDrive/Desktop/FINSIGHT/node_modules/mongoose/lib/plugins/validateBeforeSave.js"],"sourcesContent":["'use strict';\n\nconst symbols = require('../schema/symbols');\n\n/*!\n * ignore\n */\n\nmodule.exports = function validateBeforeSave(schema) {\n  const unshift = true;\n  schema.pre('save', false, validateBeforeSavePreSave, null, unshift);\n};\n\nasync function validateBeforeSavePreSave(options) {\n  // Nested docs have their own presave\n  if (this.$isSubdocument) {\n    return;\n  }\n\n  const hasValidateBeforeSaveOption = options &&\n      (typeof options === 'object') &&\n      ('validateBeforeSave' in options);\n\n  let shouldValidate;\n  if (hasValidateBeforeSaveOption) {\n    shouldValidate = !!options.validateBeforeSave;\n  } else {\n    shouldValidate = this.$__schema.options.validateBeforeSave;\n  }\n\n  // Validate\n  if (shouldValidate) {\n    const hasValidateModifiedOnlyOption = options &&\n        (typeof options === 'object') &&\n        ('validateModifiedOnly' in options);\n    const validateOptions = hasValidateModifiedOnlyOption ?\n      { validateModifiedOnly: options.validateModifiedOnly } :\n      null;\n    await this.$validate(validateOptions).then(\n      () => {\n        this.$op = 'save';\n      }\n    );\n  }\n}\n\nvalidateBeforeSavePreSave[symbols.builtInMiddleware] = true;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,OAAO,GAAGC,OAAO,CAAC,mBAAmB,CAAC;;AAE5C;AACA;AACA;;AAEAC,MAAM,CAACC,OAAO,GAAG,SAASC,kBAAkBA,CAACC,MAAM,EAAE;EACnD,MAAMC,OAAO,GAAG,IAAI;EACpBD,MAAM,CAACE,GAAG,CAAC,MAAM,EAAE,KAAK,EAAEC,yBAAyB,EAAE,IAAI,EAAEF,OAAO,CAAC;AACrE,CAAC;AAED,eAAeE,yBAAyBA,CAACC,OAAO,EAAE;EAChD;EACA,IAAI,IAAI,CAACC,cAAc,EAAE;IACvB;EACF;EAEA,MAAMC,2BAA2B,GAAGF,OAAO,IACtC,OAAOA,OAAO,KAAK,QAAS,IAC5B,oBAAoB,IAAIA,OAAQ;EAErC,IAAIG,cAAc;EAClB,IAAID,2BAA2B,EAAE;IAC/BC,cAAc,GAAG,CAAC,CAACH,OAAO,CAACL,kBAAkB;EAC/C,CAAC,MAAM;IACLQ,cAAc,GAAG,IAAI,CAACC,SAAS,CAACJ,OAAO,CAACL,kBAAkB;EAC5D;;EAEA;EACA,IAAIQ,cAAc,EAAE;IAClB,MAAME,6BAA6B,GAAGL,OAAO,IACxC,OAAOA,OAAO,KAAK,QAAS,IAC5B,sBAAsB,IAAIA,OAAQ;IACvC,MAAMM,eAAe,GAAGD,6BAA6B,GACnD;MAAEE,oBAAoB,EAAEP,OAAO,CAACO;IAAqB,CAAC,GACtD,IAAI;IACN,MAAM,IAAI,CAACC,SAAS,CAACF,eAAe,CAAC,CAACG,IAAI,CACxC,MAAM;MACJ,IAAI,CAACC,GAAG,GAAG,MAAM;IACnB,CACF,CAAC;EACH;AACF;AAEAX,yBAAyB,CAACR,OAAO,CAACoB,iBAAiB,CAAC,GAAG,IAAI","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}