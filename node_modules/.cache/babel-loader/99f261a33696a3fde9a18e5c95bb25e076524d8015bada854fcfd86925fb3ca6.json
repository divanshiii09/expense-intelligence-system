{"ast":null,"code":"/*!\n * body-parser\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n * @private\n */\nvar debug = require('debug')('body-parser:json');\nvar read = require('../read');\nvar {\n  normalizeOptions\n} = require('../utils');\n\n/**\n * Module exports.\n */\n\nmodule.exports = json;\n\n/**\n * RegExp to match the first non-space in a string.\n *\n * Allowed whitespace is defined in RFC 7159:\n *\n *    ws = *(\n *            %x20 /              ; Space\n *            %x09 /              ; Horizontal tab\n *            %x0A /              ; Line feed or New line\n *            %x0D )              ; Carriage return\n */\nvar FIRST_CHAR_REGEXP = /^[\\x20\\x09\\x0a\\x0d]*([^\\x20\\x09\\x0a\\x0d])/; // eslint-disable-line no-control-regex\n\nvar JSON_SYNTAX_CHAR = '#';\nvar JSON_SYNTAX_REGEXP = /#+/g;\n\n/**\n * Create a middleware to parse JSON bodies.\n *\n * @param {Object} [options]\n * @returns {Function}\n * @public\n */\nfunction json(options) {\n  const normalizedOptions = normalizeOptions(options, 'application/json');\n  var reviver = options?.reviver;\n  var strict = options?.strict !== false;\n  function parse(body) {\n    if (body.length === 0) {\n      // special-case empty json body, as it's a common client-side mistake\n      // TODO: maybe make this configurable or part of \"strict\" option\n      return {};\n    }\n    if (strict) {\n      var first = firstchar(body);\n      if (first !== '{' && first !== '[') {\n        debug('strict violation');\n        throw createStrictSyntaxError(body, first);\n      }\n    }\n    try {\n      debug('parse json');\n      return JSON.parse(body, reviver);\n    } catch (e) {\n      throw normalizeJsonSyntaxError(e, {\n        message: e.message,\n        stack: e.stack\n      });\n    }\n  }\n  const readOptions = {\n    ...normalizedOptions,\n    // assert charset per RFC 7159 sec 8.1\n    isValidCharset: charset => charset.slice(0, 4) === 'utf-'\n  };\n  return function jsonParser(req, res, next) {\n    read(req, res, next, parse, debug, readOptions);\n  };\n}\n\n/**\n * Create strict violation syntax error matching native error.\n *\n * @param {string} str\n * @param {string} char\n * @returns {Error}\n * @private\n */\nfunction createStrictSyntaxError(str, char) {\n  var index = str.indexOf(char);\n  var partial = '';\n  if (index !== -1) {\n    partial = str.substring(0, index) + JSON_SYNTAX_CHAR.repeat(str.length - index);\n  }\n  try {\n    JSON.parse(partial); /* istanbul ignore next */\n    throw new SyntaxError('strict violation');\n  } catch (e) {\n    return normalizeJsonSyntaxError(e, {\n      message: e.message.replace(JSON_SYNTAX_REGEXP, function (placeholder) {\n        return str.substring(index, index + placeholder.length);\n      }),\n      stack: e.stack\n    });\n  }\n}\n\n/**\n * Get the first non-whitespace character in a string.\n *\n * @param {string} str\n * @returns {string|undefined}\n * @private\n */\nfunction firstchar(str) {\n  var match = FIRST_CHAR_REGEXP.exec(str);\n  return match ? match[1] : undefined;\n}\n\n/**\n * Normalize a SyntaxError for JSON.parse.\n *\n * @param {SyntaxError} error\n * @param {Object} obj\n * @returns {SyntaxError}\n * @private\n */\nfunction normalizeJsonSyntaxError(error, obj) {\n  var keys = Object.getOwnPropertyNames(error);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (key !== 'stack' && key !== 'message') {\n      delete error[key];\n    }\n  }\n\n  // replace stack before message for Node.js 0.10 and below\n  error.stack = obj.stack.replace(error.message, obj.message);\n  error.message = obj.message;\n  return error;\n}","map":{"version":3,"names":["debug","require","read","normalizeOptions","module","exports","json","FIRST_CHAR_REGEXP","JSON_SYNTAX_CHAR","JSON_SYNTAX_REGEXP","options","normalizedOptions","reviver","strict","parse","body","length","first","firstchar","createStrictSyntaxError","JSON","e","normalizeJsonSyntaxError","message","stack","readOptions","isValidCharset","charset","slice","jsonParser","req","res","next","str","char","index","indexOf","partial","substring","repeat","SyntaxError","replace","placeholder","match","exec","undefined","error","obj","keys","Object","getOwnPropertyNames","i","key"],"sources":["C:/Users/bhavn/OneDrive/Desktop/FINSIGHT/node_modules/body-parser/lib/types/json.js"],"sourcesContent":["/*!\n * body-parser\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar debug = require('debug')('body-parser:json')\nvar read = require('../read')\nvar { normalizeOptions } = require('../utils')\n\n/**\n * Module exports.\n */\n\nmodule.exports = json\n\n/**\n * RegExp to match the first non-space in a string.\n *\n * Allowed whitespace is defined in RFC 7159:\n *\n *    ws = *(\n *            %x20 /              ; Space\n *            %x09 /              ; Horizontal tab\n *            %x0A /              ; Line feed or New line\n *            %x0D )              ; Carriage return\n */\nvar FIRST_CHAR_REGEXP = /^[\\x20\\x09\\x0a\\x0d]*([^\\x20\\x09\\x0a\\x0d])/ // eslint-disable-line no-control-regex\n\nvar JSON_SYNTAX_CHAR = '#'\nvar JSON_SYNTAX_REGEXP = /#+/g\n\n/**\n * Create a middleware to parse JSON bodies.\n *\n * @param {Object} [options]\n * @returns {Function}\n * @public\n */\nfunction json (options) {\n  const normalizedOptions = normalizeOptions(options, 'application/json')\n\n  var reviver = options?.reviver\n  var strict = options?.strict !== false\n\n  function parse (body) {\n    if (body.length === 0) {\n      // special-case empty json body, as it's a common client-side mistake\n      // TODO: maybe make this configurable or part of \"strict\" option\n      return {}\n    }\n\n    if (strict) {\n      var first = firstchar(body)\n\n      if (first !== '{' && first !== '[') {\n        debug('strict violation')\n        throw createStrictSyntaxError(body, first)\n      }\n    }\n\n    try {\n      debug('parse json')\n      return JSON.parse(body, reviver)\n    } catch (e) {\n      throw normalizeJsonSyntaxError(e, {\n        message: e.message,\n        stack: e.stack\n      })\n    }\n  }\n\n  const readOptions = {\n    ...normalizedOptions,\n    // assert charset per RFC 7159 sec 8.1\n    isValidCharset: (charset) => charset.slice(0, 4) === 'utf-'\n  }\n\n  return function jsonParser (req, res, next) {\n    read(req, res, next, parse, debug, readOptions)\n  }\n}\n\n/**\n * Create strict violation syntax error matching native error.\n *\n * @param {string} str\n * @param {string} char\n * @returns {Error}\n * @private\n */\nfunction createStrictSyntaxError (str, char) {\n  var index = str.indexOf(char)\n  var partial = ''\n\n  if (index !== -1) {\n    partial = str.substring(0, index) + JSON_SYNTAX_CHAR.repeat(str.length - index)\n  }\n\n  try {\n    JSON.parse(partial); /* istanbul ignore next */ throw new SyntaxError('strict violation')\n  } catch (e) {\n    return normalizeJsonSyntaxError(e, {\n      message: e.message.replace(JSON_SYNTAX_REGEXP, function (placeholder) {\n        return str.substring(index, index + placeholder.length)\n      }),\n      stack: e.stack\n    })\n  }\n}\n\n/**\n * Get the first non-whitespace character in a string.\n *\n * @param {string} str\n * @returns {string|undefined}\n * @private\n */\nfunction firstchar (str) {\n  var match = FIRST_CHAR_REGEXP.exec(str)\n\n  return match\n    ? match[1]\n    : undefined\n}\n\n/**\n * Normalize a SyntaxError for JSON.parse.\n *\n * @param {SyntaxError} error\n * @param {Object} obj\n * @returns {SyntaxError}\n * @private\n */\nfunction normalizeJsonSyntaxError (error, obj) {\n  var keys = Object.getOwnPropertyNames(error)\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i]\n    if (key !== 'stack' && key !== 'message') {\n      delete error[key]\n    }\n  }\n\n  // replace stack before message for Node.js 0.10 and below\n  error.stack = obj.stack.replace(error.message, obj.message)\n  error.message = obj.message\n\n  return error\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}